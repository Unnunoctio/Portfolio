---
import { db, Skill } from 'astro:db';
import type { Skill as SkillType } from '../types';
import SkillBadge from './SkillBadge.astro';

interface Props {
  title: string;
}

const { title } = Astro.props;
const { project } = Astro.params;

let skills: SkillType[] = []
if (project === undefined) {
  skills = await db.select().from(Skill)
}

skills.sort((a, b) => a.order - b.order)
---

<div class="mt-16 p-4 w-full max-w-skill-box bg-bg-skills rounded-2xl shadow-skills"> 
  <h2 class="text-2xl">{title}</h2>
  <ul class="flex flex-wrap gap-3 mt-4">
    {skills.map(skill => (
      <li><SkillBadge {...skill} /></li>
    ))}
  </ul>
</div>

